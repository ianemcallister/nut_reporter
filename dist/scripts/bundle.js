config.$inject=["$routeProvider","$locationProvider"],employeeList.$inject=["dataService"];var ahNuts=angular.module("nutReporter",["ngRoute"]);function mainController(t,e,n,o,a,i,s){console.log("in the main controller");var r=this;function l(e,t){return e.getFullYear()+"-"+c(e.getMonth()+1)+"-"+c(e.getDate())+"T"+t}function c(e){return 10<=e?e:"0"+e}r.date=new Date,r.strTime="00:00:00-07:00",r.endTime="23:59:59-07:00",r.selectedEmployee="",r.selectedLocation="",r.laborHours=7.5,r.salesHours=7,r.baseRate=12,r.txsSummary={},r.locationsList=o,r.employeeList=a,r.CMEList=i,r.submitQuery=function(){s.queries.CME_Transactions({analysis:["sales"],location:r.selectedLocation,begin_time:l(r.date,r.strTime),end_time:l(r.date,r.endTime),devices:[],employees:[r.selectedEmployee],adjustments:[],sales_hrs:r.salesHours,labor_hrs:r.laborHours,base_rate_hrly:100*r.baseRate,emails:{employee:[],supervisors:["info@ah-nuts.com"],other:[]},CME_info:{name:""}}).then(function(e){r.txsSummary=e,console.log(e),t.$apply()})}}function dataService(c){return{queries:{CME_Transactions:function(e){return console.log("sending query for transactions"),console.log(e),new Promise(function(t,n){c({method:"POST",url:"/queryEmployeeTransactions",headers:{"Content-Type":"application/json"},data:e}).then(function(e){t(e.data)},function(e){n(e)})})}},sqr_locations:{list:function(){var e={};return console.log("getting locations list"),new Promise(function(t,n){c({method:"POST",url:"/squarepos/locations",headers:{"Content-Type":"application/json"},data:e}).then(function(e){t(e.data)},function(e){n(e)})})}},sqr_employees:{list:function(e,t,n,o,a,i,s,r){var l={status:e,external_id:t,limit:n,order:o,begin_updated_at:a,end_updated_at:i,begin_created_at:s,end_created_at:r};return console.log("getting employees list"),new Promise(function(t,n){c({method:"POST",url:"/squarepos/employees",headers:{"Content-Type":"application/json"},data:l}).then(function(e){t(e.data)},function(e){n(e)})})}},sqr_txs:{full_day:function(e,t,n){var o={location:e,start:t,end:n};return console.log("getting day's Transactions"),new Promise(function(t,n){c({method:"POST",url:"/squarepos/txs",headers:{"Content-Type":"application/json"},data:o}).then(function(e){t(e.data)},function(e){n(e)})})},select_txs:function(e){var o={};return console.log("getting sqr txs"),e.forEach(function(e){}),new Promise(function(t,n){c({method:"POST",url:"/v1/batch",headers:{"Content-Type":"application/json"},data:o}).then(function(e){t(e.data)},function(e){n(e)})})}},sales_days:{compile_batch:function(e){return new Promise(function(t,n){c({method:"POST",url:"/api/sales_days/compile_new_sales_days_batch",headers:{"Content-Type":"application/json"},data:e}).then(function(e){t(e.data)},function(e){n(e)})})}},test:function(){console.log("this is the data center test")}}}function config(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"views/dailyScorecardGen.htm",controller:"mainController",controllerAs:"vm",resolve:{locationsList:locationsList,employeeList:employeeList,CMEList:CMEList}}).otherwise({redirectTo:"/"})}function locationsList(){return new Promise(function(e,t){e([{value:"Oregon",id:"M53KQT35YKE5C"},{value:"Online",id:"S4P16GQRK21CF"},{value:"Utah",id:"14E8S7P16JQDM"}])})}function employeeList(n){return new Promise(function(t,e){n.sqr_employees.list().then(function(e){t(e)})})}function CMEList(){return new Promise(function(e,t){e("good test")})}angular.module("nutReporter").controller("mainController",mainController),mainController.$inject=["$scope","$log","$location","locationsList","employeeList","CMEList","dataService"],angular.module("nutReporter").factory("dataService",dataService),dataService.$inject=["$http"],angular.module("nutReporter").config(config);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvd2ViYXBwLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9tYWluLmNvbnRyb2xsZXIuanMiLCJzY3JpcHRzL2ZhY3Rvcmllcy9kYXRhLnNlcnZpY2UuanMiLCJzY3JpcHRzL3JvdXRlcy9yb3V0ZXMuY29uZmlnLmpzIl0sIm5hbWVzIjpbImFoTnV0cyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJtYWluQ29udHJvbGxlciIsIiRzY29wZSIsIiRsb2ciLCIkbG9jYXRpb24iLCJsb2NhdGlvbnNMaXN0IiwiZW1wbG95ZWVMaXN0IiwiQ01FTGlzdCIsImRhdGFTZXJ2aWNlIiwiY29uc29sZSIsImxvZyIsInNlbGYiLCJ0aGlzIiwiX2J1aWxkRGF0ZVN0cmluZyIsImRhdGUiLCJ0aW1lIiwiZ2V0RnVsbFllYXIiLCJfZm9ybWF0TW9udGhEYXRlIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiaW50IiwiRGF0ZSIsInN0clRpbWUiLCJlbmRUaW1lIiwic2VsZWN0ZWRFbXBsb3llZSIsInNlbGVjdGVkTG9jYXRpb24iLCJsYWJvckhvdXJzIiwic2FsZXNIb3VycyIsImJhc2VSYXRlIiwidHhzU3VtbWFyeSIsInN1Ym1pdFF1ZXJ5IiwicXVlcmllcyIsIkNNRV9UcmFuc2FjdGlvbnMiLCJhbmFseXNpcyIsImxvY2F0aW9uIiwiYmVnaW5fdGltZSIsImVuZF90aW1lIiwiZGV2aWNlcyIsImVtcGxveWVlcyIsImFkanVzdG1lbnRzIiwic2FsZXNfaHJzIiwibGFib3JfaHJzIiwiYmFzZV9yYXRlX2hybHkiLCJlbWFpbHMiLCJlbXBsb3llZSIsInN1cGVydmlzb3JzIiwib3RoZXIiLCJDTUVfaW5mbyIsIm5hbWUiLCJ0aGVuIiwicXVlcnlSZXNwb25zZSIsIiRhcHBseSIsIiRodHRwIiwicGFyYW1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJtZXRob2QiLCJ1cmwiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwiZGF0YSIsInJlc3BvbnNlIiwiZXJyb3IiLCJzcXJfbG9jYXRpb25zIiwibGlzdCIsInBvc3RPYmplY3QiLCJzcXJfZW1wbG95ZWVzIiwic3RhdHVzIiwiZXh0ZXJuYWxfaWQiLCJsaW1pdCIsIm9yZGVyIiwiYmVnaW5fdXBkYXRlZF9hdCIsImVuZF91cGRhdGVkX2F0IiwiYmVnaW5fY3JlYXRlZF9hdCIsImVuZF9jcmVhdGVkX2F0Iiwic3FyX3R4cyIsImZ1bGxfZGF5Iiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInN0YXJ0IiwiZW5kIiwic2VsZWN0X3R4cyIsInR4c0xpc3QiLCJmb3JFYWNoIiwidHgiLCJzYWxlc19kYXlzIiwiY29tcGlsZV9iYXRjaCIsInRlc3QiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaGFzaFByZWZpeCIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwidmFsdWUiLCJpZCIsIiRpbmplY3QiLCJmYWN0b3J5Il0sIm1hcHBpbmdzIjoiMkZBRUEsSUFBQUEsT0FBQUMsUUFBQUMsT0FBQSxjQUFBLENBQUEsWUNHQSxTQUFBQyxlQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUVBQyxRQUFBQyxJQUFBLDBCQUdBLElBQUFDLEVBQUFDLEtBaURBLFNBQUFDLEVBQUFDLEVBQUFDLEdBR0EsT0FBQUQsRUFBQUUsY0FBQSxJQUNBQyxFQUFBSCxFQUFBSSxXQUFBLEdBQUEsSUFDQUQsRUFBQUgsRUFBQUssV0FBQSxJQUNBSixFQUdBLFNBQUFFLEVBQUFHLEdBUUEsT0FKQSxJQUFBQSxFQUFBQSxFQUNBLElBQUFBLEVBN0RBVCxFQUFBRyxLQUFBLElBQUFPLEtBQ0FWLEVBQUFXLFFBQUEsaUJBQ0FYLEVBQUFZLFFBQUEsaUJBQ0FaLEVBQUFhLGlCQUFBLEdBQ0FiLEVBQUFjLGlCQUFBLEdBQ0FkLEVBQUFlLFdBQUEsSUFDQWYsRUFBQWdCLFdBQUEsRUFDQWhCLEVBQUFpQixT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UUFBQSxDQUFBLFNDTkF0RyxRQUNBQyxPQUFBLGVBQ0F5RixPQUFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2RlZmluZSB0aGUgbW9kdWxlXG5cbnZhciBhaE51dHMgPSBhbmd1bGFyLm1vZHVsZSgnbnV0UmVwb3J0ZXInLCBbJ25nUm91dGUnXSk7IiwiYW5ndWxhci5tb2R1bGUoJ251dFJlcG9ydGVyJykuY29udHJvbGxlcignbWFpbkNvbnRyb2xsZXInLCBtYWluQ29udHJvbGxlcik7XG5cbm1haW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyRsb2cnLCAnJGxvY2F0aW9uJywgJ2xvY2F0aW9uc0xpc3QnLCAnZW1wbG95ZWVMaXN0JywgJ0NNRUxpc3QnLCAnZGF0YVNlcnZpY2UnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBtYWluQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRsb2NhdGlvbiwgbG9jYXRpb25zTGlzdCwgZW1wbG95ZWVMaXN0LCBDTUVMaXN0LCBkYXRhU2VydmljZSkge1xuICAgIC8vbm90aWZ5IHByb2dyZXNzXG4gICAgY29uc29sZS5sb2coJ2luIHRoZSBtYWluIGNvbnRyb2xsZXInKTtcbiAgICBcbiAgICAvLyAgREVGSU5FIExPQ0FMIFZBUklBQkxFU1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHNlbGYuZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgc2VsZi5zdHJUaW1lID0gXCIwMDowMDowMC0wNzowMFwiO1xuICAgIHNlbGYuZW5kVGltZSA9IFwiMjM6NTk6NTktMDc6MDBcIjtcbiAgICBzZWxmLnNlbGVjdGVkRW1wbG95ZWUgPSBcIlwiO1xuICAgIHNlbGYuc2VsZWN0ZWRMb2NhdGlvbiA9IFwiXCI7XG4gICAgc2VsZi5sYWJvckhvdXJzID0gNy41O1xuICAgIHNlbGYuc2FsZXNIb3VycyA9IDc7XG4gICAgc2VsZi5iYXNlUmF0ZSA9IDEyLjAwO1xuICAgIHNlbGYudHhzU3VtbWFyeSA9IHt9O1xuXG4gICAgLy8gIExJU1RTXG4gICAgc2VsZi5sb2NhdGlvbnNMaXN0ID0gbG9jYXRpb25zTGlzdDtcbiAgICBzZWxmLmVtcGxveWVlTGlzdCA9IGVtcGxveWVlTGlzdDtcbiAgICBzZWxmLkNNRUxpc3QgPSBDTUVMaXN0O1xuXG4gICAgLy8gIFZJRVcgTU9ERUwgRlVOQ1RJT05TXG4gICAgc2VsZi5zdWJtaXRRdWVyeSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8vICBBQ0NFU1MgREFUQSBTRVJWSUNFXG4gICAgICAgIGRhdGFTZXJ2aWNlLnF1ZXJpZXMuQ01FX1RyYW5zYWN0aW9ucyh7XG4gICAgICAgICAgICBhbmFseXNpczogWydzYWxlcyddLFxuICAgICAgICAgICAgbG9jYXRpb246IHNlbGYuc2VsZWN0ZWRMb2NhdGlvbixcbiAgICAgICAgICAgIGJlZ2luX3RpbWU6IF9idWlsZERhdGVTdHJpbmcoc2VsZi5kYXRlLCBzZWxmLnN0clRpbWUpLFxuICAgICAgICAgICAgZW5kX3RpbWU6IF9idWlsZERhdGVTdHJpbmcoc2VsZi5kYXRlLCBzZWxmLmVuZFRpbWUpLFxuICAgICAgICAgICAgZGV2aWNlczogW10sXG4gICAgICAgICAgICBlbXBsb3llZXM6IFtzZWxmLnNlbGVjdGVkRW1wbG95ZWVdLFxuICAgICAgICAgICAgYWRqdXN0bWVudHM6IFtdLFxuICAgICAgICAgICAgc2FsZXNfaHJzOiBzZWxmLnNhbGVzSG91cnMsXG4gICAgICAgICAgICBsYWJvcl9ocnM6IHNlbGYubGFib3JIb3VycyxcbiAgICAgICAgICAgIGJhc2VfcmF0ZV9ocmx5OiBzZWxmLmJhc2VSYXRlICogMTAwLFxuICAgICAgICAgICAgZW1haWxzOiB7XG4gICAgICAgICAgICAgICAgZW1wbG95ZWU6IFtdLFxuICAgICAgICAgICAgICAgIHN1cGVydmlzb3JzOiBbJ2luZm9AYWgtbnV0cy5jb20nXSxcbiAgICAgICAgICAgICAgICBvdGhlcjogW11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDTUVfaW5mbzoge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihxdWVyeVJlc3BvbnNlKSB7XG4gICAgICAgICAgICBzZWxmLnR4c1N1bW1hcnkgPSBxdWVyeVJlc3BvbnNlO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocXVlcnlSZXNwb25zZSk7XG4gICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgIH0pO1xuICAgIFxuICAgIH07XG5cbiAgICAvLyAgTE9DQUwgTUVUSE9EU1xuICAgIGZ1bmN0aW9uIF9idWlsZERhdGVTdHJpbmcoZGF0ZSwgdGltZSkge1xuICAgICAgICAvLyAgREVGSU5FIExPQ0FMIFZBUklBQkxFU1xuICAgICAgICAvLyAgUkVUVVJOIFNUUklOR1xuICAgICAgICByZXR1cm4gIGRhdGUuZ2V0RnVsbFllYXIoKSArIFwiLVwiICtcbiAgICAgICAgICAgICAgICBfZm9ybWF0TW9udGhEYXRlKGRhdGUuZ2V0TW9udGgoKSArIDEpICsgXCItXCIgK1xuICAgICAgICAgICAgICAgIF9mb3JtYXRNb250aERhdGUoZGF0ZS5nZXREYXRlKCkpICsgXCJUXCIgK1xuICAgICAgICAgICAgICAgIHRpbWVcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gX2Zvcm1hdE1vbnRoRGF0ZShpbnQpIHtcbiAgICAgICAgLy8gIERFRklORSBMT0NBTCBWQVJJQUJMRVNcbiAgICAgICAgdmFyIHJldHVyblZhbHVlID0gXCJcIjtcblxuICAgICAgICBpZihpbnQgPj0gMTApIHJldHVyblZhbHVlID0gaW50O1xuICAgICAgICBlbHNlIHJldHVyblZhbHVlID0gXCIwXCIgKyBpbnQ7XG5cbiAgICAgICAgLy8gIFJFVFVSTiBWQVJJQUJMRVxuICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgfTtcbn07IiwiLypcbipcdEJBQ0tFTkQgREFUQSBTRVJWSUNFXG4qXG4qL1xuXG4vL2RlZmluZSBtb2R1bGVcbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdudXRSZXBvcnRlcicpXG4gICAgLmZhY3RvcnkoJ2RhdGFTZXJ2aWNlJywgZGF0YVNlcnZpY2UpO1xuXG4vL2RlcGVuZGVuY3kgaW5qZWN0aW9uc1xuZGF0YVNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuLy9kZWNsYXJlIHRoZSBzZXJ2aWNlXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGRhdGFTZXJ2aWNlKCRodHRwKSB7XG5cblx0Ly9kZWZpbmUgbWV0aG9kc1xuXHR2YXIgZGF0YVNlcnZpY2UgPSB7XG4gICAgICAgIHF1ZXJpZXM6IHtcbiAgICAgICAgICAgIENNRV9UcmFuc2FjdGlvbnM6IENNRV90cmFuc2FjdGlvbnNfcXVlcnlcbiAgICAgICAgfSxcblx0XHRzcXJfbG9jYXRpb25zOiB7XG5cdFx0XHRsaXN0OiBzcXJfbG9jYXRpb25zX2xpc3Rcblx0XHR9LFxuXHRcdHNxcl9lbXBsb3llZXM6IHtcblx0XHRcdGxpc3Q6IHNxcl9lbXBsb3llZXNfbGlzdFxuXHRcdH0sXG5cdFx0c3FyX3R4czoge1xuXHRcdFx0ZnVsbF9kYXk6IHNxcl90eHNfZGF5LFxuXHRcdFx0c2VsZWN0X3R4czogc3FyX3NlbGVjdF90eHNcblx0XHR9LFxuXHRcdHNhbGVzX2RheXM6IHtcblx0XHRcdGNvbXBpbGVfYmF0Y2g6IGNvbXBpbGVfbmV3X3NhbGVzX2RheV9iYXRjaFxuICAgICAgICB9LFxuICAgICAgICB0ZXN0OiB0ZXN0XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIENNRV90cmFuc2FjdGlvbnNfcXVlcnkocGFyYW1zKSB7XG4gICAgICAgIC8vICBOT1RJRlkgUFJPR1JFU1NcbiAgICAgICAgY29uc29sZS5sb2coJ3NlbmRpbmcgcXVlcnkgZm9yIHRyYW5zYWN0aW9ucycpO1xuICAgICAgICBjb25zb2xlLmxvZyhwYXJhbXMpO1xuXG4gICAgICAgIC8vICBSRVRVUk4gQVNZTkMgV09SS1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vICBTVUJNSVRUSU5HIFFVRVJZXG4gICAgICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdHVybDogJy9xdWVyeUVtcGxveWVlVHJhbnNhY3Rpb25zJyxcblx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogcGFyYW1zXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcblxuICAgIH07XG4gICAgXG4gICAgZnVuY3Rpb24gdGVzdCgpIHsgY29uc29sZS5sb2coJ3RoaXMgaXMgdGhlIGRhdGEgY2VudGVyIHRlc3QnKTsgfVxuXG5cdGZ1bmN0aW9uIHNxcl9zZWxlY3RfdHhzKHR4c0xpc3QpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgcG9zdE9iamVjdCA9IHt9O1xuXHRcdGNvbnNvbGUubG9nKCdnZXR0aW5nIHNxciB0eHMnKTtcblxuXHRcdC8vaXRlcmF0ZSBvdmVyIGFsbCB0eFxuXHRcdHR4c0xpc3QuZm9yRWFjaChmdW5jdGlvbih0eCkge1xuXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RyeSBQT1NUXG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHR1cmw6ICcvdjEvYmF0Y2gnLFxuXHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiBwb3N0T2JqZWN0XG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9XG5cblx0Ly9cblx0ZnVuY3Rpb24gc3FyX2xvY2F0aW9uc19saXN0KCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBwb3N0T2JqZWN0ID0ge307XG5cblx0XHRjb25zb2xlLmxvZygnZ2V0dGluZyBsb2NhdGlvbnMgbGlzdCcpO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90cnkgUE9TVFxuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiAnL3NxdWFyZXBvcy9sb2NhdGlvbnMnLFxuXHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiBwb3N0T2JqZWN0XG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9O1xuXG5cdC8vXG5cdGZ1bmN0aW9uIHNxcl9lbXBsb3llZXNfbGlzdChzdGF0dXMsIGV4dGVybmFsX2lkLCBsaW1pdCwgb3JkZXIsIGJlZ2luX3VwZGF0ZWRfYXQsIGVuZF91cGRhdGVkX2F0LCBiZWdpbl9jcmVhdGVkX2F0LCBlbmRfY3JlYXRlZF9hdCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBwb3N0T2JqZWN0ID0ge1xuXHRcdFx0c3RhdHVzOiBzdGF0dXMsXG5cdFx0XHRleHRlcm5hbF9pZDogZXh0ZXJuYWxfaWQsXG5cdFx0XHRsaW1pdDogbGltaXQsXG5cdFx0XHRvcmRlcjogb3JkZXIsXG5cdFx0XHRiZWdpbl91cGRhdGVkX2F0OiBiZWdpbl91cGRhdGVkX2F0LFxuXHRcdFx0ZW5kX3VwZGF0ZWRfYXQ6IGVuZF91cGRhdGVkX2F0LFxuXHRcdFx0YmVnaW5fY3JlYXRlZF9hdDogYmVnaW5fY3JlYXRlZF9hdCxcblx0XHRcdGVuZF9jcmVhdGVkX2F0OiBlbmRfY3JlYXRlZF9hdFxuXHRcdH07XG5cblx0XHRjb25zb2xlLmxvZygnZ2V0dGluZyBlbXBsb3llZXMgbGlzdCcpO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90cnkgUE9TVFxuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiAnL3NxdWFyZXBvcy9lbXBsb3llZXMnLFxuXHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiBwb3N0T2JqZWN0XG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9XG5cblx0Ly9cdFRFU1QgRlVOQ1RJT05cblx0ZnVuY3Rpb24gY29tcGlsZV9uZXdfc2FsZXNfZGF5X2JhdGNoKHBhcmFtcykge1xuXHRcdFxuXHRcdC8vY29uc29sZS5sb2coJ3Rlc3RpbmcgZGF0YVNlcnZpY2UnKTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdHJ5IFBPU1Rcblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdHVybDogJy9hcGkvc2FsZXNfZGF5cy9jb21waWxlX25ld19zYWxlc19kYXlzX2JhdGNoJyxcblx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcblx0XHRcdFx0fSxcdFxuXHRcdFx0XHRkYXRhOiBwYXJhbXNcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRcblx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2soZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdH07XG5cblx0Ly9TUVVBUkUgVFJBTlNBQ1RJT04gREFZU1xuXHRmdW5jdGlvbiBzcXJfdHhzX2RheShsb2NhdGlvbiwgc3RhcnREYXRlLCBlbmREYXRlKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHBvc3RPYmplY3QgPSB7XG5cdFx0XHRsb2NhdGlvbjogbG9jYXRpb24sXG5cdFx0XHRzdGFydDogc3RhcnREYXRlLFxuXHRcdFx0ZW5kOiBlbmREYXRlXG5cdFx0fTtcblxuXHRcdGNvbnNvbGUubG9nKCdnZXR0aW5nIGRheVxcJ3MgVHJhbnNhY3Rpb25zJyk7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RyeSBQT1NUXG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHR1cmw6ICcvc3F1YXJlcG9zL3R4cycsXG5cdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGE6IHBvc3RPYmplY3Rcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRcblx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2soZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdH1cblxuXHQvL3R1cm4gdGhlIG1ldGhvZFxuICAgIHJldHVybiBkYXRhU2VydmljZTtcdFxufTtcblxuIiwiLypcbipcdFJPVVRFUy1DT05GSUdcbipcbipcdFRoaXMgbW9kdWxlIHNldHMgdXAgYWxsIHRoZSByZXF1aXJlZCBhbmd1bGFyIHJvdXRlcyBmb3IgdGhpcyB3ZWIgYXBwLlxuKi9cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdudXRSZXBvcnRlcicpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcblx0JGxvY2F0aW9uUHJvdmlkZXIuaGFzaFByZWZpeCgnJyk7XG4gICAgJHJvdXRlUHJvdmlkZXJcblx0Ly9QVUJMSUMgUk9VVEVTXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZGFpbHlTY29yZWNhcmRHZW4uaHRtJywgICAgICAvLyd2aWV3cy9kYWlseVNjb3JlY2FyZEdlbi5odG0nXG4gICAgICAgIGNvbnRyb2xsZXI6ICdtYWluQ29udHJvbGxlcicsICAgICAgICAgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICBsb2NhdGlvbnNMaXN0OiBsb2NhdGlvbnNMaXN0LFxuICAgICAgICAgICAgZW1wbG95ZWVMaXN0OiBlbXBsb3llZUxpc3QsXG4gICAgICAgICAgICBDTUVMaXN0OiBDTUVMaXN0XG4gICAgICAgIH1cbiAgICB9KVxuXHQub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbi8qXG4qICAgUkVRVUlSRUQgRlVOQ1RJT05TXG4qXG4qL1xuXG4vLyAgTE9DQVRJT05TIExJU1RcbmZ1bmN0aW9uIGxvY2F0aW9uc0xpc3QoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICByZXNvbHZlKFt7dmFsdWU6IFwiT3JlZ29uXCIsIGlkOiBcIk01M0tRVDM1WUtFNUNcIn0se3ZhbHVlOlwiT25saW5lXCIsaWQ6XCJTNFAxNkdRUksyMUNGXCJ9LCB7dmFsdWU6XCJVdGFoXCIsaWQ6XCIxNEU4UzdQMTZKUURNXCJ9XSk7XG4gICAgfSk7XG59O1xuXG4vLyAgRU1QTE9ZRUUgTElTVFxuZnVuY3Rpb24gZW1wbG95ZWVMaXN0KGRhdGFTZXJ2aWNlKSB7XG4gICAgLy9yZXR1cm4gdGhlIHByb21pc2VcbiAgICAvL3JldHVybiAnZ29vZCB0ZXN0JztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vaGl0IHRoZSBzZXJ2ZXIgZm9yIHRoZSBcbiAgICAgICAgZGF0YVNlcnZpY2Uuc3FyX2VtcGxveWVlcy5saXN0KCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9KTtcbn07XG5cbi8vICBDTUUgTElTVFxuZnVuY3Rpb24gQ01FTGlzdCgpIHtcbiAgICAvL3JldHVybiB0aGUgcHJvbWlzZVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy9oaXQgdGhlIHNlcnZlciBmb3IgdGhlIFxuICAgICAgICByZXNvbHZlKCdnb29kIHRlc3QnKTtcbiAgICB9KTtcbn07XG4iXX0=
